
    {{ define "main" }}
    <div class="container" style="padding: 30px 20px;">
        <nav style="margin-bottom: 30px; font-size: 0.9rem; background: #fff; padding: 12px 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
            <a href="/" style="color: #d63031; text-decoration: none; font-weight: bold;">Home</a>
            {{ if .Parent }}
                {{ if .Parent.IsHome }}{{ else }}
                <span style="margin: 0 8px; color: #ccc;">/</span>
                <a href="{{ .Parent.RelPermalink }}" style="color: #0984e3; text-decoration: none;">{{ .Parent.Title }}</a>
                {{ end }}
            {{ end }}
            <span style="margin: 0 8px; color: #ccc;">/</span>
            <span style="color: #2d3436; font-weight: bold;">{{ .Title }} ({{ len .RegularPagesRecursive }})</span>
        </nav>

        <h1 style="border-left: 6px solid #d63031; padding-left: 15px; margin-bottom: 40px;">{{ .Title }} Records</h1>

        {{ $subPages := .RegularPagesRecursive }}
        {{ $withImages := where $subPages "Params.images" "!=" nil }}
        {{ if $withImages }}
        <section style="margin-bottom: 50px; background: #f1f2f6; padding: 25px; border-radius: 12px;">
            <h3 style="margin-top: 0; color: #2d3436;">ðŸ“¸ Featured Media in {{ .Title }}</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 20px;">
                {{ range first 4 (sort $withImages "Params.images" "desc") }}
                <a href="{{ .RelPermalink }}" style="text-decoration: none; color: inherit; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                    <div style="position: relative;">
                        <span style="position: absolute; top: 8px; right: 8px; background: #0984e3; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.7rem;">{{ len .Params.images }} Photos</span>
                        {{ with index .Params.images 0 }}<img src="{{ . }}" style="width: 100%; height: 180px; object-fit: cover;">{{ end }}
                    </div>
                    <div style="padding: 10px; font-weight: bold; font-size: 0.9rem;">{{ .Title }}</div>
                </a>
                {{ end }}
            </div>
        </section>
        {{ end }}

        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 15px;">
            {{ range .Pages }}
            <a href="{{ .RelPermalink }}" style="padding: 15px; background: white; border-radius: 8px; text-decoration: none; color: #2d3436; box-shadow: 0 2px 4px rgba(0,0,0,0.05); border: 1px solid #eee;">
                {{ .Title }} {{ if .IsSection }}<span style="color: #999; font-weight: normal;">({{ len .RegularPagesRecursive }})</span>{{ end }}
            </a>
            {{ end }}
        </div>
    </div>
    {{ end }}
    