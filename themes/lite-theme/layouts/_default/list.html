
    {{ define "main" }}
    <div class="container" style="padding: 30px 20px; font-family: sans-serif;">
        <nav style="margin-bottom: 25px; font-size: 0.9rem; background: #fff; padding: 12px 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
            <a href="/" style="color: #d63031; text-decoration: none; font-weight: bold;">Home</a>
            {{ if .Parent }}{{ if not .Parent.IsHome }}
                <span style="margin: 0 8px; color: #ccc;">/</span>
                <a href="{{ .Parent.RelPermalink }}" style="color: #0984e3; text-decoration: none;">{{ .Parent.Title }}</a>
            {{ end }}{{ end }}
            <span style="margin: 0 8px; color: #ccc;">/</span>
            <span style="color: #2d3436; font-weight: bold;">{{ .Title }}</span>
        </nav>
        <h1 style="border-left: 6px solid #d63031; padding-left: 15px; margin-bottom: 35px;">{{ .Title }} ({{ len .RegularPagesRecursive }})</h1>
        
        {{ $subPages := .RegularPagesRecursive }}{{ $localImgs := where $subPages "Params.images" "!=" nil }}
        {{ if $localImgs }}
        <section style="background: #f1f2f6; padding: 25px; border-radius: 15px; margin-bottom: 40px;">
            <h3 style="margin-top: 0;">ðŸ“¸ Featured in {{ .Title }}</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 20px;">
                {{ range first 4 (sort $localImgs "Params.images" "desc") }}
                <a href="{{ .RelPermalink }}" style="text-decoration: none; color: inherit; background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.08);">
                    {{ with index .Params.images 0 }}<img src="{{ . }}" style="width: 100%; height: 160px; object-fit: cover;">{{ end }}
                    <div style="padding: 10px; font-weight: bold; font-size: 0.9rem;">{{ .Title }}</div>
                </a>
                {{ end }}
            </div>
        </section>
        {{ end }}

        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 15px;">
            {{ range .Pages }}
            <a href="{{ .RelPermalink }}" style="padding: 15px; background: white; border: 1px solid #eee; border-radius: 10px; text-decoration: none; color: #2d3436; display: flex; justify-content: space-between;">
                <span>{{ .Title }}</span>
                {{ if .IsSection }}<span style="background: #dfe6e9; color: #2d3436; font-size: 0.75rem; font-weight: bold; padding: 2px 8px; border-radius: 10px;">{{ len .RegularPagesRecursive }}</span>{{ end }}
            </a>
            {{ end }}
        </div>
    </div>
    {{ end }}
    