
    {{ define "main" }}
    <div class="container" style="padding-top: 40px;">
        
        <section style="margin-bottom: 60px;">
            <div style="border-left: 8px solid #d63031; padding-left: 15px; margin-bottom: 30px;">
                <h2 style="margin: 0; font-size: 1.8rem;">Deep Dive Reports</h2>
                <p style="margin: 5px 0 0 0; color: #636e72;">Cases with the most comprehensive narrative details</p>
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 25px;">
                {{ $allCases := .Site.RegularPages }}
                {{ range first 4 (sort $allCases (apply .Content "len" ".") "desc") }}
                <a href="{{ .RelPermalink }}" style="text-decoration: none; color: inherit; background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.08); display: flex; flex-direction: column; transition: 0.3s;" onmouseover="this.style.transform='translateY(-5px)'" onmouseout="this.style.transform='translateY(0)'">
                    <div style="padding: 15px; background: #fffdf0; flex-grow: 1;">
                        <span style="font-size: 0.75rem; background: #ffeaa7; color: #d35400; padding: 2px 8px; border-radius: 4px; font-weight: bold;">ğŸ“ {{ len .Content }} Characters</span>
                        <h3 style="margin: 10px 0 5px 0; color: #2d3436; font-size: 1.1rem;">{{ .Title }}</h3>
                        <p style="font-size: 0.85rem; color: #636e72; line-height: 1.4;">{{ .Summary | truncate 100 }}...</p>
                    </div>
                </a>
                {{ end }}
            </div>
        </section>

        <section style="margin-bottom: 60px;">
            <div style="border-left: 8px solid #0984e3; padding-left: 15px; margin-bottom: 30px;">
                <h2 style="margin: 0; font-size: 1.8rem;">Visual Identity Cases</h2>
                <p style="margin: 5px 0 0 0; color: #636e72;">Cases with the highest number of identification photos</p>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 25px;">
                {{ $casesWithImages := where .Site.RegularPages "Params.images" "!=" nil }}
                {{ range first 4 (sort $casesWithImages (apply .Params.images "len" ".") "desc") }}
                <a href="{{ .RelPermalink }}" style="text-decoration: none; color: inherit; background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.08); transition: 0.3s; position: relative;" onmouseover="this.style.transform='translateY(-5px)'" onmouseout="this.style.transform='translateY(0)'">
                    <span style="position: absolute; top: 10px; right: 10px; background: rgba(9, 132, 227, 0.9); color: white; padding: 4px 10px; border-radius: 20px; font-size: 0.75rem; font-weight: bold; z-index: 10;">ğŸ“¸ {{ len .Params.images }} Photos</span>
                    {{ with index .Params.images 0 }}
                    <img src="{{ . }}" style="width: 100%; height: 260px; object-fit: cover;">
                    {{ end }}
                    <div style="padding: 15px;">
                        <h3 style="margin: 0; color: #2d3436; font-size: 1.1rem;">{{ .Title }}</h3>
                        <p style="font-size: 0.85rem; color: #636e72;">{{ .Params.metadata.city }}, {{ .Params.metadata.state }}</p>
                    </div>
                </a>
                {{ end }}
            </div>
        </section>
    </div>
    {{ end }}
    